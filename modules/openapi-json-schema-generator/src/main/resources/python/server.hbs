# coding: utf-8
{{> _helper_header }}

from __future__ import annotations
import abc
import dataclasses
import typing


@dataclasses.dataclass
class ServerWithoutVariables(abc.ABC):
    url: str


@dataclasses.dataclass
class ServerWithVariables(abc.ABC):
    _url: str
    variables: schemas.DictSchema
    variables_cls: typing.Type[schemas.DictSchema]
    url: str = dataclasses.field(init=False)

    def __post_init__(self):
        url = self._url
        for (key, value) in self.variables.items():
            if value == schemas.unset:
                cast_value = self.variables_cls.Schema_.properties[key].Schema_.default
            else:
                cast_value = value
            cast_value = typing.cast(str, cast_value)
            url = url.replace("{" + key + "}", cast_value)
        self.url = url

from {{packageName}} import schemas
