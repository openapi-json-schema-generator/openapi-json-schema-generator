# coding: utf-8

{{> _helper_header }}

{{#with response}}
{{#if refInfo}}
{{> _helper_imports }}
{{name.camelCaseName}} = {{refInfo.refModule}}.{{refInfo.refClass}}
{{else}}
import dataclasses
import datetime
import decimal
import io
import typing
import uuid

import frozendict
import typing_extensions
import urllib3

from {{packageName}} import api_client
from {{packageName}} import schemas
    {{#if content}}
    {{#each content}}
        {{#with this.schema}}
from .content.{{../@key.snakeCaseName}} import {{name.snakeCaseName}} as {{../@key.snakeCaseName}}_{{name.snakeCaseName}}
        {{/with}}
    {{/each}}
    {{/if}}
    {{#each headers}}
from .headers import {{name.snakeCaseName}}
    {{/each}}
    {{#if headers}}
{{> components/responses/_helper_header_schema_and_def xParams=headers xParamsName="Header" }}
    {{/if}}


@dataclasses.dataclass
class _ApiResponse(api_client.ApiResponse):
    response: urllib3.HTTPResponse
    {{#and headers content}}
    body: typing.Union[
    {{#each content}}
    {{#if this.schema}}
        {{#with this.schema}}
        {{../@key.snakeCaseName}}_{{name.snakeCaseName}}.{{name.camelCaseName}},
        {{/with}}
    {{else}}
        schemas.Unset,
    {{/if}}
    {{/each}}
    ]
    headers: Header.Params
    {{else}}
    {{#or headers content}}
    {{#if headers}}
    headers: Header.Params
    body: schemas.Unset = schemas.unset
    {{else}}
    body: typing.Union[
    {{#each content}}
    {{#if this.schema}}
        {{#with this.schema}}
        {{../@key.snakeCaseName}}_{{name.snakeCaseName}}.{{name.camelCaseName}},
        {{/with}}
    {{else}}
        schemas.Unset,
    {{/if}}
    {{/each}}
    ]
    headers: schemas.Unset = schemas.unset
    {{/if}}
    {{/or}}
    {{/and}}
    {{#unless headers}}
    {{#unless content}}
    body: schemas.Unset = schemas.unset
    headers: schemas.Unset = schemas.unset
    {{/unless}}
    {{/unless}}


class {{name.camelCaseName}}(api_client.OpenApiResponse[_ApiResponse]):
    response_cls = _ApiResponse
    {{#each content}}


    class __{{@key.camelCaseName}}MediaType(api_client.MediaType):
        {{#with this}}
            {{#with schema}}
        schema: typing.Type[{{../@key.snakeCaseName}}_{{name.snakeCaseName}}.{{name.camelCaseName}}] = {{../@key.snakeCaseName}}_{{name.snakeCaseName}}.{{name.camelCaseName}}
            {{else}}
        pass
            {{/with}}
        {{/with}}
    {{/each}}
    {{#if content}}
    __Content = typing_extensions.TypedDict(
        '__Content',
        {
        {{#each content}}
            '{{{@key.name}}}': typing.Type[__{{@key.camelCaseName}}MediaType],
        {{/each}}
        }
    )
    content: __Content = {
        {{#each content}}
        '{{{@key.name}}}': __{{@key.camelCaseName}}MediaType,
        {{/each}}
    }
    {{/if}}
    {{#if headers}}
    headers=Header.parameters
    {{/if}}
{{/if}}
{{/with}}