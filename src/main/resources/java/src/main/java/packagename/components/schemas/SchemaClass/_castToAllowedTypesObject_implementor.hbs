
@Override
public Object getNewInstance(Object arg, List<Object> pathToItem, PathToSchemasMap pathToSchemas) {
{{#if types}}
    {{#each types}}
        {{#if @first}}
    if (arg {{#eq this "null"}}== null{{/eq}}{{#eq this "boolean"}}instanceof Boolean{{/eq}}{{#or (eq this "integer") (eq this "number")}}instanceof Number{{/or}}{{#eq this "string" }}instanceof String{{/eq}}{{#eq this "array"}}instanceof FrozenList{{/eq}}{{#eq this "object"}}instanceof FrozenMap{{/eq}}) {
        {{else}}
    } else if (arg {{#eq this "null"}}== null{{/eq}}{{#eq this "boolean"}}instanceof Boolean{{/eq}}{{#or (eq this "integer") (eq this "number")}}instanceof Number{{/or}}{{#eq this "string" }}instanceof String{{/eq}}{{#eq this "array"}}instanceof FrozenList{{/eq}}{{#eq this "object"}}instanceof FrozenMap{{/eq}}) {
        {{/if}}
        {{#eq this "null"}}
        return getNewInstance((Void) null, pathToItem, pathToSchemas);
        {{/eq}}
        {{#eq this "boolean"}}
        boolean boolArg = (Boolean) arg;
        return getNewInstance(boolArg, pathToItem, pathToSchemas);
        {{/eq}}
        {{#or (eq this "integer") (eq this "number")}}
        return getNewInstance((Number) arg, pathToItem, pathToSchemas);
        {{/or}}
        {{#eq this "string" }}
        return getNewInstance((String) arg, pathToItem, pathToSchemas);
        {{/eq}}
        {{#eq this "array"}}
        @SuppressWarnings("unchecked") FrozenList<{{#with items}}{{> src/main/java/packagename/components/schemas/types/schema_cast_type sourceJsonPath=../jsonPath forceNull=true }}{{else}}Object{{/with}}> castArg = (FrozenList<{{#with items}}{{> src/main/java/packagename/components/schemas/types/schema_cast_type sourceJsonPath=../jsonPath forceNull=true }}{{else}}Object{{/with}}>) arg;
        return getNewInstance(castArg, pathToItem, pathToSchemas);
        {{/eq}}
        {{#eq this "object"}}
        @SuppressWarnings("unchecked") FrozenMap<{{#with mapValueSchema}}{{> src/main/java/packagename/components/schemas/types/schema_cast_type sourceJsonPath=../jsonPath forceNull=true }}{{else}}Object{{/with}}> castArg = (FrozenMap<{{#with ../mapValueSchema}}{{> src/main/java/packagename/components/schemas/types/schema_cast_type sourceJsonPath=../jsonPath forceNull=true }}{{else}}Object{{/with}}>) arg;
        return getNewInstance(castArg, pathToItem, pathToSchemas);
        {{/eq}}
        {{#if @last}}
    }
        {{/if}}
    {{/each}}
{{else}}
    if (arg == null) {
        return getNewInstance((Void) null, pathToItem, pathToSchemas);
    } else if (arg instanceof Boolean) {
        boolean boolArg = (Boolean) arg;
        return getNewInstance(boolArg, pathToItem, pathToSchemas);
    } else if (arg instanceof Number) {
        return getNewInstance((Number) arg, pathToItem, pathToSchemas);
    } else if (arg instanceof String) {
        return getNewInstance((String) arg, pathToItem, pathToSchemas);
    } else if (arg instanceof FrozenList) {
        @SuppressWarnings("unchecked") FrozenList<{{#with items}}{{> src/main/java/packagename/components/schemas/types/schema_cast_type sourceJsonPath=../jsonPath forceNull=true }}{{else}}Object{{/with}}> castArg = (FrozenList<{{#with items}}{{> src/main/java/packagename/components/schemas/types/schema_cast_type sourceJsonPath=../jsonPath forceNull=true }}{{else}}Object{{/with}}>) arg;
        return getNewInstance(castArg, pathToItem, pathToSchemas);
    } else if (arg instanceof FrozenMap) {
        @SuppressWarnings("unchecked") FrozenMap<{{#with mapValueSchema}}{{> src/main/java/packagename/components/schemas/types/schema_cast_type sourceJsonPath=../jsonPath forceNull=true }}{{else}}Object{{/with}}> castArg = (FrozenMap<{{#with ../mapValueSchema}}{{> src/main/java/packagename/components/schemas/types/schema_cast_type sourceJsonPath=../jsonPath forceNull=true }}{{else}}Object{{/with}}>) arg;
        return getNewInstance(castArg, pathToItem, pathToSchemas);
    }
{{/if}}
    throw new InvalidTypeException("Invalid input type="+arg.getClass()+". It can't be instantiated by this schema");
}
